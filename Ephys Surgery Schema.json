{
    "type": "object",
    "properties": {
        "Specimen ID": {
            "type": "integer"
        },
        "Procedure Date": {
            "type": "string",
            "format": "date"
        },
        "Experimenter first name": {
            "type": "string"
        },
        "Experimenter last name": {
            "type": "string"
        },
        "Protocol ID": {
            "type": "integer"
        },
        "Surgery": {
            "type": "string",
            "enum": ["Head Plate Craniotomy", "Injection"]
        }
    },

    "allof": [
        {
            "if": {
                "properties": {"Surgery": {"const": "Head Plate Craniotomy" } } 
            },
            "then": {
                "properties": {
                    "HPC Coordinates ML": {"type": "float"},
                    "HPC Coordinates AP": {"type": "float"},
                    "HPC Size (mm)": {"type": "float"},
                    "HPC Angle roll (deg)": {"type": "float"},
                    "HPC Angle pitch (deg)": {"type": "float"}
                },
                "required": [
                    "HPC Coordinates ML",
                    "HPC Coordinates AP",
                    "HPC Size (mm)",
                    "HPC Angle roll (deg)",
                    "HPC Angle pitch (deg)"
                    ]
            }
        },
        {
            "if": {
                "properties": {"Surgery": {"const": "Injection"} }
            },
            "then": {
                "properties": {
                    "Injection Coodinates ML": {"type": "float"},
                    "Injection Coordinates AP": {"type": "float"},
                    "Injection Coordinates depth": {"type": "float"},
                    "Injection Angle": {"type": "float"},
                    "Injection Virus": {"type": "string"},
                    "Injection Type": {
                        "type": "string",
                        "enum": ["Iontophoresis","Nanoject"]
                    },
                    "Injection Duration": {
                        "type": "string",
                        "format": "time"
                    }
                },
                "allof": [
                    {
                        "if": {
                            "properties": {"Injection Type": {"const": "Iontophoresis"} }   
                        },
                        "then": {
                            "properties": {
                                "Injection Current (uA)": {"type": "float"},
                                "Alternating Current": {"type": "string"}
                            },
                            "required": [
                                "Injection Current (uA)",
                                "Alternating Current"
                            ]
                        }
                    },
                    {
                        "if":{
                            "properties": {"Injection Type": {"const": "Nanoject"} }
                        },
                        "then": {
                            "properties": {
                                "Injection Volume (nL)": {"type": "float"}
                            },
                            "required": [
                                "Injection Volume (nL)"
                            ]
                        }
                    }
                ],
                "required": [
                    "Injection Coordinates ML",
                    "Injection Coordinates AP",
                    "Injection Coordinates depth",
                    "Injection Construct",
                    "Injection Type",
                    "Injection Duration"
                    ]
            }
        }
        ],
    "required": [
        "Specimen ID",
        "Procedure Date",
        "Experimenter first name",
        "Experimenter last name",
        "Protocol ID",
        "Surgery"
        ]
}

